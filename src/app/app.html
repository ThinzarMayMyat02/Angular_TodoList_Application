<main class="min-h-screen max-w-2xl mx-auto p-6">
  <div class="mx-auto max-w-2xl space-y-4">
    <header class="flex items-center gap-3 pb-4">
      <div class="grid size-10 place-items-center rounded-xl bg-zinc-800">Heart</div>
      <h1 class="text-2xl font-semibold">TO-DO LIST APPLICATION</h1>
    </header>
  </div>

<section class="mt-4 rounded-2xl border border-zinc-800 bg-zinc-900/60 p-4">
  <div class="flex gap-2">
    <input class="flex-1 rounded-lg bg-zinc-9000 px-3 py-2 ring-1 ring-zinc-800 focus:outline-none focus:ring-indigo-500"
    placeholder="what needs to be done??"
    [(ngModel)]="newTitle" (keyup.enter)="addTodo(newTitle)"
    aria-label="New TO-DO">
    <button class="rounded-lg bg-indigo-600 px-4 py-2 font-medium hover:bg-indigo-500 disabled:opacity-50"
    (click)="addTodo(newTitle)">Add</button>
  </div>
</section>

<section class="flex gap-2 mt-3 mb-3 rounded-xl border border-zinc-800 bg-gray-900/60 p-3">
  <button class="text-zinc-400 btn" [class.btn-primary]="filter() === 'all'"
   (click)="filter.set('all')">All</button>
  <button class="text-zinc-400 btn" [class.btn-primary]="filter() === 'active'"
  (click)="filter.set('active')">Active</button>
  <button class="text-zinc-400 btn" [class.btn-primary]="filter() === 'completed'"
  (click)="filter.set('completed')">Completed</button>
</section>

  <section class="mt-4 rounded-2xl border border-zinc-800 bg-zinc-900/60 p-4">
    @if(status().total == 0){
      <p class="text-zinc-400">NO Todo found!</p>
    }@else{

      <div class="mb-3 flex items-center justify-between">
        <h3 class="text-sm font-semibold text-zinc-300">Tasks</h3>
        <span class="inline-flex items-center gap-1 rounded-full bg-zinc-800 px-3 py-1 text-xs text-zinc-300">
          {{status().active}} Active .  {{status().completed}} Completed  . {{status().total}} total
        </span>
      </div>

      <ul role="list" class="space-y-2 max-h-80 overflow-auto pr-1">
        @for(todo of todos(); track todo.id ){
        <li class="group flex items-center justify-between gap-3 rounded-xl border border-zinc-800 bg-zinc-900/80 p-3 hover:border-zinc-700 hover:bg-zinc-900"
        [class.bg-zinc-900/80]="!todo.completed"
        [class.bg-zinc-900/40]="todo.completed"
        [class.opacity-70]="todo.completed"
        [class.hover\:opacity-100]="todo.completed"
        [class.hover\:bg-zinc-900/60]="todo.completed"
        >
          <label for="" class="flex flex-1 items-center gap-3">
            <input type="checkbox" class="size-4 accent-indigo-500" [checked]="todo.completed" (click)="toggleTodo(todo.id)" />
            <input class="flex-1 rounded-md bg-transparent px-2 py-1 ring-1 ring-transparent focus:outline-none focus:ring-zinc-700"
            [value]="todo.title"
            [class.line-through]="todo.completed"
            [class.text-zinc-400]="todo.completed"
            (keyup.enter)="renameTodo(todo.id, $event.target.value)">
          </label>

          <button class="rounded-md border border-zinc-700 px-2 py-1 text-zinc-300 transition hover:border-zinc-500 hover:text-white"
         (click)="removeTodo(todo.id)">

            X
          </button>
        </li>
      }
      </ul>
    }
  </section>
</main>
